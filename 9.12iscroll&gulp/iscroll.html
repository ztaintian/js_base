<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
    <meta name="viewport" content="width=device-width,user-scalable=no">
    <script type="text/javascript" src="iscroll/src/iscroll.js"></script>
<style type="text/css">
		*{
			margin:0;
			padding:0;
		}
		html,body{
			width:100%;
			height:100%;
			position: relative;
		}
		header{
			position: absolute;
			height:50px;
			width:100%;
			top:0;
			background: red;
		}		
		footer{
			position: absolute;
			height:50px;
			width:100%;
			bottom:0;
			background: red;
		}
		#container{
			position: absolute;
			bottom:50px;
			top:50px;
			background: yellow;
			width:100%;
		}
		p{
			height:50px;
		}
</style>
<script type="text/javascript">
		window.onload=function(){
			var iscroll=new iScroll('container',{
				 onScrollMove:function(){
				 	console.log(this.wrapperH,this.y,this.scrollerH)
					if(this.wrapperH-this.y>this.scrollerH){
						this.pushState = true;
						console.log(this.pushState)
					};
					if(this.y>=0){
						this.pushState1 = true;
						console.log(this.pushState1)
					}

				},
				onScrollEnd:function(){
					if(this.pushState){
						for(var i=0;i<5;i++){
							var p=document.createElement("p");
							p.innerHTML+="插入新内容"+i;
							var last=document.getElementById("last");
							var wrapper=document.getElementById("wrapper");
							wrapper.insertBefore(p,last);
							this.pushState = false;
							this.refresh();	
						}
					}
					if(this.pushState1){
						for(var i=0;i<5;i++){
							var p=document.createElement("p");
							p.innerHTML+="插入新内容"+i;
							var first=document.getElementById("first");
							var wrapper=document.getElementById("wrapper");
							wrapper.insertBefore(p,first);
							this.pushState1 = false;
							this.refresh();	
						}
					}


				}
			});

		}
</script>
<body>
	<header></header>
	<div id="container">
		<div id="wrapper">
			<div id="first">
				<span>上拉刷新</span>
			</div>
			<p>22</p>
			<p>w</p>
			<p>d</p>
			<p>d</p>
			<p>dsw</p>
			<p>dsa</p>
			<p>da</p>
			<p>da</p>
			<p>dad</p>
			<p>dad</p>
			<p>dad</p>
			<p>dad</p>
			<p>ad</p>
			<p>a</p>
			<p>da</p>
			<p>da</p>
			<p>da</p>
			<p>da</p>
			<p>a</p>
			<p>ada</p>
			<div id="last">
				<span>下拉加载</span>
			</div>
		</div>
	</div>
	<footer></footer>
</body>
</html>