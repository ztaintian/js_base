<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  </head>
  <script>
 const treeNode = [{
  parentId: 0,
  title: "目录1",
  id: 1,
  children: [{
    parentId: 1,
    title: "子目录1-1",
    id: 22,
  }, {
    parentId: 1,
    title: "子目录1-2",
    id: 33,
  }],
}, {
  parentId: 0,
  title: "目录2",
  id: 2,
  children: [{
    parentId: 2,
    title: "子目录2-1",
    id: 44,
  }, {
    parentId: 1,
    title: "子目录2-2",
    id: 55,
  }],
}];

function flat(arr, parentId) {
  var tempArr = [];
  (function flat2(arr, parentId) {
    arr.map((item) => {
      tempArr.push({
        id: item.id,
        parentId: parentId,
        title: item.title
      });
      if (item.children) {
        flat2(item.children, item.id);
      }
    })
  }(arr, parentId));
  return tempArr;
}
console.log(flat(treeNode, null))

function flatToTree(arr,parentId) {
  let tempArr = []

    arr.map((item) => {
      if (item.parentId === parentId) {
        let children = flatToTree(arr,item.id);
        if (children.length>0) {
          tempArr.push({
          children: children,
          ...item
        })

        } else {
          tempArr.push({
          ...item
        })

        }
      }
    })
    return tempArr
  
}

console.log(flatToTree(flat(treeNode, null), null))
</script>
  <body>

  </body>
</html>