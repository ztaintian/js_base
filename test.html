<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<script></script>
<style>

</style>

<body>
  <input id="file" type="file">
</body>
<script>
  var event = {
    clientList: [],

    // 添加订阅
    listen: function (key, fn) {
      if (!this.clientList[key]) {
        this.clientList[key] = [];
      }

      // 订阅的消息添加进缓存列表
      this.clientList[key].push(fn);
    },

    // 取消订阅
    remove: function (key, fn) {
      var fns = this.clientList[key];
      if (!fns) {
        return false;
      }

      // 没有传入fn，则表示需要取消key对应的所有订阅消息
      if (!fn) {
        fns && (fns.length = 0);
      } else {
        // 取消fn的订阅
        for (var l = fns.length - 1; l >= 0; l--) {
          var _fn = fns[l];
          if (_fn === fn) {
            fns.splice(l, 1);
          }
        }
      }
    },

    // 触发订阅
    trigger: function () {
      var key = Array.prototype.shift.call(arguments),
        fns = this.clientList[key];
      if (!fns || fns.length === 0) { return false }

      for (var i = 0, fn; fn = fns[i++];) {
        fn.apply(this, arguments)
      }
    }
  }
</script>

</html>